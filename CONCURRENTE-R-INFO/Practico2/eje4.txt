programa ejercicio4 
procesos    
  proceso juntarFlores(ES flores:numero)   
  comenzar   
    mientras HayFlorEnLaEsquina   
      tomarFlor  
      flores:=flores +1  
  fin 
  proceso juntarPapeles(ES papeles:numero)  
  comenzar  
    mientras HayPapelEnLaEsquina  
      tomarPapel   
      papeles:=papeles + 1         
  fin 
  proceso maximo(E suma:numero; ES sumaMax:numero;E id:numero; ES idMax:numero) 
  comenzar
    sumaMax:=-1    
    si (suma > sumaMax)   
      sumaMax:=suma   
      idMax:=id  
  fin   
areas  
  area1:AreaC(1,1,100,100)  
robots 
  robot limpiador  
  variables
    Ai,Ci:numero  
    papeles, flores:numero  
    limpiar:numero  
    A:numero  
    C:numero    
    id:numero  
    suma:numero  
    pos:numero  
  comenzar 
    Ai:=PosAv 
    Ci:=PosCa  
    RecibirMensaje(id,robot5)    
    RecibirMensaje(limpiar,robot5)  
    Random(A,25,75)  
    Random(C,25,75)  
    si limpiar=1  
      Pos(A,C)  
      juntarPapeles(papeles)  
      juntarFlores(flores)  
      suma:=flores+papeles 
      Pos(Ai,Ci)  
    EnviarMensaje(id,robot5)   
    EnviarMensaje(suma,robot5)  
    RecibirMensaje(pos,robot5)  
    si pos=1 
      Pos(50,50) 
  fin
  robot jefe 
  variables
    id:numero 
    suma:numero 
    sumaMax:numero  
    idMax:numero 
  comenzar 
    EnviarMensaje(1,robot1)   
    EnviarMensaje(2,robot2)   
    EnviarMensaje(3,robot3)    
    EnviarMensaje(4,robot4)       
    repetir 10  
      Random(id,1,5)  
      si id=1        
        EnviarMensaje(1,robot1)  
      sino  
        si id=2  
          EnviarMensaje(1,robot2)  
        sino  
          si id=3  
            EnviarMensaje(1,robot3)  
          sino  
            EnviarMensaje(1,robot4)  
      RecibirMensaje(id,*)  
      si id=1  
        RecibirMensaje(suma,robot1)  
      sino  
        si id=2  
          RecibirMensaje(suma,robot2)  
        sino  
          si id=3  
            RecibirMensaje(suma,robot3)  
          sino 
            RecibirMensaje(suma,robot4) 
      maximo(suma,sumaMax,id,idMax)              
    si idMax=1 
      EnviarMensaje(1,robot1)  
    sino
      si idMax=2
        EnviarMensaje(1,robot2)
      sino 
        si idMax=3 
          EnviarMensaje(1,robot3)  
        sino 
          EnviarMensaje(1,robot4)  
  fin 
variables 
  robot1: limpiador 
  robot2: limpiador 
  robot3: limpiador 
  robot4: limpiador 
  robot5: jefe 
comenzar
  AsignarArea(robot1,area1) 
  AsignarArea(robot2,area1) 
  AsignarArea(robot3,area1) 
  AsignarArea(robot4,area1) 
  AsignarArea(robot5,area1) 
  Iniciar(robot1,25,1) 
  Iniciar(robot2,30,1) 
  Iniciar(robot3,35,1) 
  Iniciar(robot4,40,1) 
  Iniciar(robot5,1,1) 
fin 